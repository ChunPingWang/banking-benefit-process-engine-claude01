# å®¢æˆ¶å„ªæƒ æµç¨‹å¼•æ“ (Banking Benefit Process Engine)

## å°ˆæ¡ˆæ¦‚è¿°

å®¢æˆ¶å„ªæƒ æµç¨‹å¼•æ“æ˜¯ä¸€å€‹åŸºæ–¼ Java 21 å’Œ Spring Boot 3 çš„é«˜æ•ˆèƒ½æµç¨‹åŸ·è¡Œç³»çµ±ï¼Œæ¡ç”¨å…­è§’å½¢æ¶æ§‹ï¼ˆHexagonal Architectureï¼‰å’Œé ˜åŸŸé©…å‹•è¨­è¨ˆï¼ˆDDDï¼‰æ–¹æ³•è«–ã€‚ç³»çµ±ä¸»è¦ç”¨æ–¼åŸ·è¡ŒéŠ€è¡Œå®¢æˆ¶å„ªæƒ ç›¸é—œçš„æ¥­å‹™æµç¨‹ï¼Œæ”¯æ´å‹•æ…‹æ±ºç­–ç¯€é»å’Œè™•ç†ç¯€é»çš„çµ„åˆåŸ·è¡Œã€‚

### æ ¸å¿ƒç‰¹è‰²
- ğŸ—ï¸ **å…­è§’å½¢æ¶æ§‹**ï¼šæ¸…æ¥šåˆ†é›¢æ¥­å‹™é‚è¼¯èˆ‡æŠ€è¡“å¯¦ä½œ
- ğŸ¯ **é ˜åŸŸé©…å‹•è¨­è¨ˆ**ï¼šä»¥æ¥­å‹™é ˜åŸŸç‚ºæ ¸å¿ƒçš„è¨­è¨ˆæ–¹æ³•
- âš¡ **é«˜æ•ˆèƒ½åŸ·è¡Œ**ï¼šæ”¯æ´ä¸¦è¡Œè™•ç†èˆ‡å¿«å–æ©Ÿåˆ¶
- ğŸ”„ **å‹•æ…‹æµç¨‹**ï¼šæ”¯æ´ Java é¡åˆ¥èˆ‡ SpEL è¡¨é”å¼é›™æ¨¡å¼
- ğŸ§  **æ™ºèƒ½è¦å‰‡å¼•æ“**ï¼šæ•´åˆ Drools è¦å‰‡å¼•æ“ï¼Œæ”¯æ´è²æ˜å¼æ¥­å‹™è¦å‰‡
- ğŸ“Š **å®Œæ•´ç›£æ§**ï¼šæä¾›åŸ·è¡Œæ—¥èªŒèˆ‡æ•ˆèƒ½ç›£æ§
- ğŸ” **å®‰å…¨å¯é **ï¼šå®Œæ•´çš„éŒ¯èª¤è™•ç†èˆ‡å¯©è¨ˆåŠŸèƒ½
- âœ… **é«˜æ¸¬è©¦è¦†è“‹ç‡**ï¼š70 å€‹å–®å…ƒæ¸¬è©¦ï¼Œ100% é€šéç‡

### æœ€æ–°æ›´æ–° (2025-10-10)
- ğŸ†• **Drools è¦å‰‡å¼•æ“æ•´åˆ**ï¼šå®Œæ•´æ•´åˆ Drools 8.44.0.Final è¦å‰‡å¼•æ“
- ğŸ”§ **DroolsDecisionEvaluationService**ï¼š@Primary æœå‹™å¯¦ç¾ç„¡ç¸«æ›¿æ›
- ï¿½ **DRL è¦å‰‡æ–‡ä»¶**ï¼šå»ºç«‹ customer-eligibility.drl å’Œ flow-control.drl
- ğŸ—ï¸ **é©é…å™¨æ¨¡å¼**ï¼šDroolsRuleEngine éš”é›¢è¦å‰‡å¼•æ“ä¾è³´
- âœ… **å®Œæ•´æ¸¬è©¦å¥—ä»¶**ï¼šDroolsDecisionEvaluationServiceUnitTest 7 å€‹æ¸¬è©¦æ¡ˆä¾‹
- ğŸ¯ **è²æ˜å¼è¦å‰‡**ï¼šæ”¯æ´æ¥­å‹™è¦å‰‡çš„è²æ˜å¼ç®¡ç†å’ŒåŸ·è¡Œ
- ğŸ“Š **è¦å‰‡ç›£æ§**ï¼šå®Œæ•´çš„è¦å‰‡åŸ·è¡Œæ—¥èªŒèˆ‡æ•ˆèƒ½ç›£æ§

## æŠ€è¡“è¦æ ¼

### æ ¸å¿ƒæŠ€è¡“æ£§
- **ç¨‹å¼èªè¨€**: Java 21
- **æ¡†æ¶**: Spring Boot 3.2.0
- **å»ºæ§‹å·¥å…·**: Gradle 8.x
- **æ¸¬è©¦æ¡†æ¶**: JUnit 5 + Mockito
- **æ¸¬è©¦è¦†è“‹ç‡**: 70 å€‹æ¸¬è©¦ï¼Œ100% é€šé
- **è³‡æ–™åº«**: H2 (é–‹ç™¼) / PostgreSQL (æ­£å¼)
- **å¿«å–**: Caffeine
- **è¦å‰‡å¼•æ“**: Drools 8.44.0.Final
- **è¡¨é”å¼å¼•æ“**: Spring Expression Language (SpEL) + Drools Rules
- **æ–‡ä»¶**: OpenAPI (Swagger)

### æ•ˆèƒ½æŒ‡æ¨™
- å–®ä¸€æµç¨‹åŸ·è¡Œæ™‚é–“ < 500ms
- ç³»çµ±æ•´é«” TPS > 1000
- Decisionè©•ä¼°æ™‚é–“ < 50ms
- Stateè™•ç†æ™‚é–“ < 200ms
- è³‡æ–™åº«æŸ¥è©¢æ™‚é–“ < 100ms

## å°ˆæ¡ˆæ¶æ§‹

### å…­è§’å½¢æ¶æ§‹è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Adapters (å¤–å±¤)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Primary Adapters (é©…å‹•ç«¯)  â”‚  Secondary Adapters (è¢«é©…å‹•ç«¯) â”‚
â”‚  â”œâ”€ REST Controllers       â”‚  â”œâ”€ Database Repositories      â”‚
â”‚  â”œâ”€ GraphQL Endpoints      â”‚  â”œâ”€ External Service Clients   â”‚
â”‚  â””â”€ Message Consumers       â”‚  â””â”€ Notification Services      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Application Layer (æ‡‰ç”¨å±¤)                â”‚
â”‚  â”œâ”€ Application Services    â”‚  â”œâ”€ DTOs                       â”‚
â”‚  â”œâ”€ Use Cases              â”‚  â””â”€ Mappers                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Domain Layer (é ˜åŸŸå±¤/æ ¸å¿ƒ)                â”‚
â”‚  â”œâ”€ Aggregates             â”‚  â”œâ”€ Domain Services            â”‚
â”‚  â”œâ”€ Entities               â”‚  â”œâ”€ Factories                  â”‚
â”‚  â”œâ”€ Value Objects          â”‚  â””â”€ Domain Events              â”‚
â”‚  â””â”€ Ports (ä»‹é¢å®šç¾©)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¥—ä»¶çµæ§‹

```
src/main/java/com/example/banking/benefit/
â”œâ”€â”€ BankingBenefitProcessEngineApplication.java    # æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•é»
â”œâ”€â”€ application/                                   # æ‡‰ç”¨å±¤
â”‚   â”œâ”€â”€ service/                                  # æ‡‰ç”¨æœå‹™
â”‚   â”œâ”€â”€ dto/                                      # æ•¸æ“šå‚³è¼¸ç‰©ä»¶
â”‚   â”‚   â”œâ”€â”€ request/                             # è«‹æ±‚ DTO
â”‚   â”‚   â””â”€â”€ response/                            # å›æ‡‰ DTO
â”‚   â””â”€â”€ mapper/                                   # DTO è½‰æ›å™¨
â”œâ”€â”€ domain/                                       # é ˜åŸŸå±¤ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ model/                                   # é ˜åŸŸæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ flow/                               # æµç¨‹èšåˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ aggregate/                      # èšåˆæ ¹
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/                         # å¯¦é«”
â”‚   â”‚   â”‚   â”œâ”€â”€ valueobject/                    # å€¼ç‰©ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ event/                          # é ˜åŸŸäº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ node/                               # ç¯€é»æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ DecisionNode.java              # æ±ºç­–ç¯€é»
â”‚   â”‚   â”‚   â””â”€â”€ ProcessNode.java               # è™•ç†ç¯€é»
â”‚   â”‚   â”œâ”€â”€ command/                            # å‘½ä»¤æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ state/                              # ç‹€æ…‹æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ common/                             # å…±ç”¨æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ customer/                           # å®¢æˆ¶æ¨¡å‹
â”‚   â”‚   â””â”€â”€ result/                             # åŸ·è¡Œçµæœ
â”‚   â”œâ”€â”€ service/                                # é ˜åŸŸæœå‹™
â”‚   â”‚   â”œâ”€â”€ FlowExecutionService.java          # æµç¨‹åŸ·è¡Œæœå‹™
â”‚   â”‚   â”œâ”€â”€ DecisionEvaluationService.java     # æ±ºç­–è©•ä¼°æœå‹™
â”‚   â”‚   â””â”€â”€ LogicCompositionService.java       # é‚è¼¯çµ„åˆæœå‹™
â”‚   â”œâ”€â”€ port/                                   # ç«¯å£ï¼ˆå…­è§’å½¢æ¶æ§‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ input/                             # è¼¸å…¥ç«¯å£
â”‚   â”‚   â””â”€â”€ output/                            # è¼¸å‡ºç«¯å£
â”‚   â”œâ”€â”€ repository/                             # å„²å­˜åº«ä»‹é¢
â”‚   â””â”€â”€ exception/                              # é ˜åŸŸä¾‹å¤–
â”œâ”€â”€ infrastructure/                              # åŸºç¤è¨­æ–½å±¤
â”‚   â”œâ”€â”€ config/                                # é…ç½®
â”‚   â”œâ”€â”€ persistence/                           # æŒä¹…åŒ–å¯¦ä½œ
â”‚   â”œâ”€â”€ adapter/                               # å¤–éƒ¨æœå‹™é©é…å™¨
â”‚   â”œâ”€â”€ drools/                               # Drools è¦å‰‡å¼•æ“ç›¸é—œ
â”‚   â”‚   â”œâ”€â”€ config/                           # Drools é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ DroolsConfig.java            # KieServices é…ç½®
â”‚   â”‚   â”œâ”€â”€ adapter/                          # Drools é©é…å™¨
â”‚   â”‚   â”‚   â””â”€â”€ DroolsRuleEngine.java        # è¦å‰‡åŸ·è¡Œå¼•æ“
â”‚   â”‚   â””â”€â”€ service/                          # Drools æœå‹™
â”‚   â”‚       â””â”€â”€ DroolsDecisionEvaluationService.java  # Drools æ±ºç­–è©•ä¼°æœå‹™
â”‚   â””â”€â”€ cache/                                 # å¿«å–å¯¦ä½œ
â””â”€â”€ config/                                     # æ‡‰ç”¨é…ç½®
    â””â”€â”€ ApplicationConfig.java

src/main/resources/
â”œâ”€â”€ rules/                                    # Drools è¦å‰‡æ–‡ä»¶
â”‚   â”œâ”€â”€ customer/                            # å®¢æˆ¶ç›¸é—œè¦å‰‡
â”‚   â”‚   â””â”€â”€ customer-eligibility.drl        # å®¢æˆ¶è³‡æ ¼è¦å‰‡
â”‚   â””â”€â”€ flow/                                # æµç¨‹æ§åˆ¶è¦å‰‡
â”‚       â””â”€â”€ flow-control.drl                 # æµç¨‹æ§åˆ¶è¦å‰‡
â”œâ”€â”€ application.yml                          # æ‡‰ç”¨é…ç½®
â”œâ”€â”€ logback-spring.xml                       # æ—¥èªŒé…ç½®
â””â”€â”€ schema.sql                               # è³‡æ–™åº« Schema
```

## æ ¸å¿ƒæ¨¡å‹è¨­è¨ˆ

### é¡åˆ¥åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Flow (èšåˆæ ¹)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - flowId: FlowId                                           â”‚
â”‚ - flowName: String                                         â”‚
â”‚ - description: String                                      â”‚
â”‚ - version: Version                                         â”‚
â”‚ - status: FlowStatus                                       â”‚
â”‚ - startNodeId: String                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + execute(): ExecutionResult                               â”‚
â”‚ + activate(): void                                         â”‚
â”‚ + deactivate(): void                                       â”‚
â”‚ + addDecisionNode(): void                                  â”‚
â”‚ + addProcessNode(): void                                   â”‚
â”‚ + getNextNode(): Node                                      â”‚
â”‚ + findNodeById(): Node                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚            â”‚            â”‚
                   â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   DecisionNode  â”‚  â”‚ ProcessNode â”‚  â”‚    Node     â”‚
    â”‚    (å¯¦é«”)       â”‚  â”‚   (å¯¦é«”)    â”‚  â”‚  (æŠ½è±¡)     â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ - nodeId        â”‚  â”‚ - nodeId    â”‚  â”‚ - nodeId    â”‚
    â”‚ - flowId        â”‚  â”‚ - flowId    â”‚  â”‚ - flowId    â”‚
    â”‚ - nodeName      â”‚  â”‚ - nodeName  â”‚  â”‚ - nodeName  â”‚
    â”‚ - decisionType  â”‚  â”‚ - stateName â”‚  â”‚ - nodeOrder â”‚
    â”‚ - implClass     â”‚  â”‚ - implClass â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ - spelExpr      â”‚  â”‚ - spelExpr  â”‚  â”‚ + getNodeId â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ + getOrder  â”‚
    â”‚ + evaluate()    â”‚  â”‚ + execute() â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â–²
                                                   â”‚
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚                   â”‚
                                 DecisionNode        ProcessNode

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     FlowId      â”‚  â”‚   Version   â”‚  â”‚ ExecutionResult â”‚
    â”‚   (å€¼ç‰©ä»¶)      â”‚  â”‚  (å€¼ç‰©ä»¶)   â”‚  â”‚    (çµæœ)       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ - value: String â”‚  â”‚ - value     â”‚  â”‚ - flowId        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ - executionId   â”‚
    â”‚ + of(): FlowId  â”‚  â”‚ + of()      â”‚  â”‚ - status        â”‚
    â”‚ + getValue()    â”‚  â”‚ + increment â”‚  â”‚ - errorMessage  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é ˜åŸŸæœå‹™æ¥å£:
â€¢ FlowExecutionService: æµç¨‹åŸ·è¡Œæœå‹™
â€¢ DecisionEvaluationService: æ±ºç­–è©•ä¼°æœå‹™  
â€¢ LogicCompositionService: é‚è¼¯çµ„åˆæœå‹™
```

### ç‹€æ…‹åœ–

```
æµç¨‹åŸ·è¡Œç‹€æ…‹è½‰æ›åœ–:

    [é–‹å§‹]
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     activate     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  DRAFT  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ ACTIVE  â”‚
   â”‚ (è‰ç¨¿)  â”‚                  â”‚ (å•Ÿç”¨)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚    â”‚
       â”‚ delete                     â”‚    â”‚ deactivate
       â–¼                            â”‚    â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ DELETED â”‚                      â”‚ â”‚INACTIVE â”‚
   â”‚ (å·²åˆªé™¤) â”‚                      â”‚ â”‚ (åœç”¨)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚    â”‚    â–²
       â–¼                            â”‚    â”‚    â”‚ reactivate
    [çµæŸ]                          â”‚    â”‚ delete
                                    â”‚    â–¼    â”‚
                               startâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ â”‚ DELETED â”‚
                                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼    â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â–¼
                               â”‚IN_PROG  â”‚[çµæŸ]
                               â”‚(åŸ·è¡Œä¸­) â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    pause â”‚         â”‚ error   â”‚ terminate
                          â–¼         â–¼         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PAUSED  â”‚â”‚ FAILURE â”‚â”‚TERMINAT â”‚
                    â”‚ (æš«åœ)  â”‚â”‚ (å¤±æ•—)  â”‚â”‚ (çµ‚æ­¢)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚         â”‚         â”‚
                    resumeâ”‚         â”‚         â”‚
                          â–¼         â–¼         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   [çµæŸ]    [çµæŸ]
                    â”‚IN_PROG  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                  completeâ”‚
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ SUCCESS â”‚
                    â”‚ (æˆåŠŸ)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                       [çµæŸ]
```

## æµç¨‹åŸ·è¡Œå¾ªåºåœ–

### åŸºæœ¬æµç¨‹åŸ·è¡Œ

```
æµç¨‹åŸ·è¡Œå¾ªåºåœ–:

Client      Controller   AppService   DomainService   NodeExecutor   Repository   Database
  â”‚             â”‚            â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚ POST executeâ”‚            â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚executeFlow â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚   findById   â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
  â”‚             â”‚            â”‚              â”‚              â”‚             â”‚  SELECT   â”‚
  â”‚             â”‚            â”‚              â”‚              â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚             â”‚            â”‚              â”‚              â”‚             â”‚   data    â”‚
  â”‚             â”‚            â”‚              â”‚              â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚             â”‚            â”‚    Flow      â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
  â”‚             â”‚            â”‚   execute    â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚              â”‚   execute    â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚           â”‚
  â”‚             â”‚            â”‚              â”‚    result    â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚ExecutionResult              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚   saveLog    â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚
  â”‚             â”‚   result   â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚  response   â”‚            â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚              â”‚              â”‚             â”‚           â”‚
  â”‚             â”‚            â”‚              â”‚              â”‚             â”‚           â”‚

åŸ·è¡Œæµç¨‹èªªæ˜:
1. å®¢æˆ¶ç«¯ç™¼é€ POST è«‹æ±‚åŸ·è¡Œæµç¨‹
2. Controller å‘¼å« AppService åŸ·è¡Œæµç¨‹
3. AppService é€é Repository æŸ¥è©¢æµç¨‹å®šç¾©
4. Repository å¾è³‡æ–™åº«å–å¾—æµç¨‹è³‡æ–™
5. AppService å‘¼å« DomainService åŸ·è¡Œæ¥­å‹™é‚è¼¯
6. DomainService é€é NodeExecutor åŸ·è¡Œå„å€‹ç¯€é»
7. åŸ·è¡Œå®Œæˆå¾Œå„²å­˜åŸ·è¡Œæ—¥èªŒ
8. è¿”å›åŸ·è¡Œçµæœçµ¦å®¢æˆ¶ç«¯
```

### æ±ºç­–ç¯€é»è©•ä¼°

```
æ±ºç­–ç¯€é»è©•ä¼°å¾ªåºåœ–:

DomainService   DecisionExecutor   EvaluationService   SpelExecutor   JavaExecutor
      â”‚               â”‚                    â”‚                â”‚             â”‚
      â”‚    execute    â”‚                    â”‚                â”‚             â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚                â”‚             â”‚
      â”‚               â”‚     evaluate       â”‚                â”‚             â”‚
      â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚             â”‚
      â”‚               â”‚                    â”‚                â”‚             â”‚
      â”‚               â”‚                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚             â”‚
      â”‚               â”‚                    â”‚ â”‚ åˆ¤æ–·é¡å‹    â”‚â”‚             â”‚
      â”‚               â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚             â”‚
      â”‚               â”‚                    â”‚                â”‚             â”‚
      â”‚               â”‚              â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”          â”‚             â”‚
      â”‚               â”‚              â”‚ SpEL?     â”‚          â”‚             â”‚
      â”‚               â”‚              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚             â”‚
      â”‚               â”‚                    â”‚ YES            â”‚             â”‚
      â”‚               â”‚                    â”‚   evaluate     â”‚             â”‚
      â”‚               â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
      â”‚               â”‚                    â”‚    result      â”‚             â”‚
      â”‚               â”‚                    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚
      â”‚               â”‚                    â”‚                â”‚             â”‚
      â”‚               â”‚                    â”‚ NO (Java)      â”‚             â”‚
      â”‚               â”‚                    â”‚                â”‚  execute    â”‚
      â”‚               â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚               â”‚                    â”‚                â”‚   result    â”‚
      â”‚               â”‚                    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚               â”‚      result        â”‚                â”‚             â”‚
      â”‚               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚             â”‚
      â”‚ ExecutionResult                    â”‚                â”‚             â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                â”‚             â”‚
      â”‚               â”‚                    â”‚                â”‚             â”‚

æ±ºç­–è©•ä¼°æµç¨‹èªªæ˜:
1. DomainService å‘¼å« DecisionExecutor åŸ·è¡Œæ±ºç­–ç¯€é»
2. DecisionExecutor å‘¼å« EvaluationService é€²è¡Œè©•ä¼°
3. EvaluationService æ ¹æ“šç¯€é»é¡å‹é¸æ“‡åŸ·è¡Œå™¨:
   - SpEL è¡¨é”å¼: ä½¿ç”¨ SpelExecutor è§£æä¸¦åŸ·è¡Œ
   - Java é¡åˆ¥: ä½¿ç”¨ JavaExecutor å‹•æ…‹è¼‰å…¥ä¸¦åŸ·è¡Œ
4. è¿”å›è©•ä¼°çµæœçµ¦ä¸Šå±¤æœå‹™
```

## è³‡æ–™åº«è¨­è¨ˆ (ER Diagram)

```
è³‡æ–™åº«å¯¦é«”é—œä¿‚åœ– (ER Diagram):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FLOW_DEFINITION                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ flow_id (PK)           VARCHAR(50)    - æµç¨‹ID                       â”‚
â”‚ â€¢ flow_name              VARCHAR(100)   - æµç¨‹åç¨±                     â”‚
â”‚ â€¢ flow_description       CLOB          - æµç¨‹æè¿°                      â”‚
â”‚ â€¢ version                VARCHAR(20)    - ç‰ˆæœ¬è™Ÿ                       â”‚
â”‚ â€¢ status                 VARCHAR(20)    - ç‹€æ…‹                         â”‚
â”‚ â€¢ start_node_id          VARCHAR(50)    - èµ·å§‹ç¯€é»ID                   â”‚
â”‚ â€¢ created_time           TIMESTAMP      - å»ºç«‹æ™‚é–“                     â”‚
â”‚ â€¢ updated_time           TIMESTAMP      - æ›´æ–°æ™‚é–“                     â”‚
â”‚ â€¢ created_by             VARCHAR(50)    - å»ºç«‹è€…                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                  â”‚                  â”‚
                   â–¼                  â–¼                  â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       DECISION_NODE         â”‚ â”‚       PROCESS_NODE          â”‚ â”‚     EXECUTION_LOG        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ node_id (PK)              â”‚ â”‚ â€¢ node_id (PK)              â”‚ â”‚ â€¢ log_id (PK)            â”‚
â”‚ â€¢ flow_id (FK)              â”‚ â”‚ â€¢ flow_id (FK)              â”‚ â”‚ â€¢ flow_id (FK)           â”‚
â”‚ â€¢ node_name                 â”‚ â”‚ â€¢ node_name                 â”‚ â”‚ â€¢ customer_id            â”‚
â”‚ â€¢ node_description          â”‚ â”‚ â€¢ node_description          â”‚ â”‚ â€¢ execution_time         â”‚
â”‚ â€¢ decision_type             â”‚ â”‚ â€¢ process_type              â”‚ â”‚ â€¢ node_id                â”‚
â”‚ â€¢ implementation_class      â”‚ â”‚ â€¢ implementation_class      â”‚ â”‚ â€¢ node_type              â”‚
â”‚ â€¢ spel_expression          â”‚ â”‚ â€¢ spel_expression          â”‚ â”‚ â€¢ execution_result       â”‚
â”‚ â€¢ node_order               â”‚ â”‚ â€¢ state_name               â”‚ â”‚ â€¢ result_data            â”‚
â”‚ â€¢ created_time             â”‚ â”‚ â€¢ node_order               â”‚ â”‚ â€¢ error_message          â”‚
â”‚ â€¢ updated_time             â”‚ â”‚ â€¢ created_time             â”‚ â”‚ â€¢ execution_duration_ms  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â€¢ updated_time             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NODE_RELATION                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ relation_id (PK)       VARCHAR(50)    - é—œä¿‚ID                       â”‚
â”‚ â€¢ flow_id (FK)           VARCHAR(50)    - æµç¨‹ID                       â”‚
â”‚ â€¢ source_node_id         VARCHAR(50)    - ä¾†æºç¯€é»ID                   â”‚
â”‚ â€¢ source_node_type       VARCHAR(20)    - ä¾†æºç¯€é»é¡å‹                 â”‚
â”‚ â€¢ target_node_id         VARCHAR(50)    - ç›®æ¨™ç¯€é»ID                   â”‚
â”‚ â€¢ target_node_type       VARCHAR(20)    - ç›®æ¨™ç¯€é»é¡å‹                 â”‚
â”‚ â€¢ relation_type          VARCHAR(20)    - é—œä¿‚é¡å‹                     â”‚
â”‚ â€¢ logic_operator         VARCHAR(10)    - é‚è¼¯é‹ç®—å­                   â”‚
â”‚ â€¢ condition_expression   CLOB          - æ¢ä»¶è¡¨é”å¼                    â”‚
â”‚ â€¢ created_time           TIMESTAMP      - å»ºç«‹æ™‚é–“                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     DECISION_GROUP          â”‚    â”‚      DECISION_GROUP_MEMBER          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ group_id (PK)             â”‚â—„â”€â”€â”€â”¤ â€¢ member_id (PK)                    â”‚
â”‚ â€¢ flow_id (FK)              â”‚    â”‚ â€¢ group_id (FK)                     â”‚
â”‚ â€¢ group_name                â”‚    â”‚ â€¢ decision_node_id (FK)             â”‚
â”‚ â€¢ logic_operator            â”‚    â”‚ â€¢ member_order                      â”‚
â”‚ â€¢ target_process_id (FK)    â”‚    â”‚ â€¢ created_time                      â”‚
â”‚ â€¢ parent_group_id (FK)      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ created_time              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸»è¦è¡¨æ ¼èªªæ˜:
â€¢ FLOW_DEFINITION: æµç¨‹å®šç¾©ä¸»è¡¨ï¼Œå„²å­˜æµç¨‹åŸºæœ¬è³‡è¨Š
â€¢ DECISION_NODE: æ±ºç­–ç¯€é»è¡¨ï¼Œæ”¯æ´ Java é¡åˆ¥èˆ‡ SpEL è¡¨é”å¼
â€¢ PROCESS_NODE: è™•ç†ç¯€é»è¡¨ï¼Œæ”¯æ´ç‹€æ…‹æ¨¡å¼èˆ‡å‹•æ…‹åŸ·è¡Œ
â€¢ NODE_RELATION: ç¯€é»é—œä¿‚è¡¨ï¼Œå®šç¾©ç¯€é»é–“çš„è½‰æ›æ¢ä»¶
â€¢ DECISION_GROUP: æ±ºç­–ç¾¤çµ„è¡¨ï¼Œæ”¯æ´è¤‡é›œé‚è¼¯çµ„åˆ (AND/OR)
â€¢ DECISION_GROUP_MEMBER: ç¾¤çµ„æˆå“¡è¡¨ï¼Œç®¡ç†ç¾¤çµ„å…§çš„æ±ºç­–ç¯€é»
â€¢ EXECUTION_LOG: åŸ·è¡Œæ—¥èªŒè¡¨ï¼Œè¨˜éŒ„æ‰€æœ‰åŸ·è¡Œæ­·ç¨‹èˆ‡æ•ˆèƒ½è³‡æ–™
```

### è³‡æ–™è¡¨èªªæ˜

#### æ ¸å¿ƒè¡¨æ ¼
- **flow_definition**: æµç¨‹å®šç¾©ä¸»è¡¨ï¼Œå„²å­˜æµç¨‹åŸºæœ¬è³‡è¨Šèˆ‡ç‰ˆæœ¬æ§åˆ¶
- **decision_node**: æ±ºç­–ç¯€é»è¡¨ï¼Œæ”¯æ´ Java é¡åˆ¥èˆ‡ SpEL è¡¨é”å¼
- **process_node**: è™•ç†ç¯€é»è¡¨ï¼Œæ”¯æ´ç‹€æ…‹æ¨¡å¼èˆ‡å‹•æ…‹åŸ·è¡Œ

#### é—œä¿‚è¡¨æ ¼
- **node_relation**: ç¯€é»é–“é—œä¿‚å®šç¾©ï¼Œæ”¯æ´æ¢ä»¶å¼è½‰æ›
- **decision_group**: æ±ºç­–ç¾¤çµ„ï¼Œæ”¯æ´è¤‡é›œé‚è¼¯çµ„åˆï¼ˆAND/ORï¼‰
- **decision_group_member**: ç¾¤çµ„æˆå“¡é—œä¿‚ï¼Œç¶­è­·åŸ·è¡Œé †åº

#### æ—¥èªŒè¡¨æ ¼
- **execution_log**: åŸ·è¡Œæ—¥èªŒï¼Œè¨˜éŒ„æ‰€æœ‰åŸ·è¡Œæ­·ç¨‹èˆ‡æ•ˆèƒ½è³‡æ–™

## API è¨­è¨ˆ

### RESTful API ç«¯é»

```yaml
# æµç¨‹ç®¡ç† API
GET    /api/v1/flows                    # æŸ¥è©¢æ‰€æœ‰æµç¨‹
GET    /api/v1/flows/{flowId}          # æŸ¥è©¢ç‰¹å®šæµç¨‹
POST   /api/v1/flows                   # å»ºç«‹æ–°æµç¨‹
PUT    /api/v1/flows/{flowId}          # æ›´æ–°æµç¨‹
DELETE /api/v1/flows/{flowId}          # åˆªé™¤æµç¨‹

# æµç¨‹åŸ·è¡Œ API
POST   /api/v1/flows/{flowId}/execute  # åŸ·è¡Œæµç¨‹
POST   /api/v1/flows/{flowId}/pause    # æš«åœæµç¨‹
POST   /api/v1/flows/{flowId}/resume   # ç¹¼çºŒæµç¨‹
POST   /api/v1/flows/{flowId}/terminate # çµ‚æ­¢æµç¨‹

# ç›£æ§èˆ‡æ—¥èªŒ API
GET    /api/v1/executions              # æŸ¥è©¢åŸ·è¡Œè¨˜éŒ„
GET    /api/v1/executions/{executionId} # æŸ¥è©¢ç‰¹å®šåŸ·è¡Œè¨˜éŒ„
GET    /api/v1/statistics              # æŸ¥è©¢çµ±è¨ˆè³‡è¨Š
GET    /api/v1/health                  # å¥åº·æª¢æŸ¥

# ç¯€é»ç®¡ç† API
GET    /api/v1/flows/{flowId}/nodes    # æŸ¥è©¢æµç¨‹ç¯€é»
POST   /api/v1/flows/{flowId}/nodes    # æ–°å¢ç¯€é»
PUT    /api/v1/flows/{flowId}/nodes/{nodeId} # æ›´æ–°ç¯€é»
DELETE /api/v1/flows/{flowId}/nodes/{nodeId} # åˆªé™¤ç¯€é»
```

### æ¨™æº–å›æ‡‰æ ¼å¼

```json
{
  "status": "SUCCESS",
  "data": {
    "flowId": "FLOW_001",
    "executionId": "EXEC_123456",
    "executionStatus": "SUCCESS",
    "duration": 234,
    "resultData": {
      "decision": true,
      "processedAmount": 1000.00
    }
  },
  "message": "æµç¨‹åŸ·è¡ŒæˆåŠŸ",
  "timestamp": "2025-10-04T10:00:00Z"
}
```

## è¨­è¨ˆæ¨¡å¼æ‡‰ç”¨

### 1. å…­è§’å½¢æ¶æ§‹ (Hexagonal Architecture)
- **ç›®çš„**: åˆ†é›¢æ¥­å‹™é‚è¼¯èˆ‡æŠ€è¡“å¯¦ä½œ
- **å¯¦ä½œ**: Port & Adapter æ¨¡å¼
- **ç¯„ä¾‹**: `FlowExecutionUseCase` (è¼¸å…¥åŸ ) + `FlowRepository` (è¼¸å‡ºåŸ )

### 2. å‘½ä»¤æ¨¡å¼ (Command Pattern)
- **ç›®çš„**: å°è£æ±ºç­–é‚è¼¯ç‚ºå¯åŸ·è¡Œå‘½ä»¤
- **å¯¦ä½œ**: `DecisionCommand` ä»‹é¢èˆ‡å…·é«”å¯¦ä½œ
- **ç¯„ä¾‹**: `JavaClassDecisionCommand`, `SpelDecisionCommand`

### 3. ç‹€æ…‹æ¨¡å¼ (State Pattern)
- **ç›®çš„**: ç®¡ç†è™•ç†ç¯€é»çš„ä¸åŒç‹€æ…‹
- **å¯¦ä½œ**: `ProcessState` ä»‹é¢èˆ‡ç‹€æ…‹å¯¦ä½œ
- **ç¯„ä¾‹**: `InitialState`, `ProcessingState`, `CompletedState`

### 4. å·¥å» æ¨¡å¼ (Factory Pattern)
- **ç›®çš„**: å‹•æ…‹å»ºç«‹ç¯€é»åŸ·è¡Œå™¨
- **å¯¦ä½œ**: `NodeExecutorFactory`
- **ç¯„ä¾‹**: æ ¹æ“šç¯€é»é¡å‹å»ºç«‹å°æ‡‰åŸ·è¡Œå™¨

### 5. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)
- **ç›®çš„**: æ”¯æ´ä¸åŒçš„è¡¨é”å¼è©•ä¼°ç­–ç•¥
- **å¯¦ä½œ**: `ExpressionEvaluator` ä»‹é¢
- **ç¯„ä¾‹**: `SpelExpressionEvaluator`, `JavaClassEvaluator`

## é–‹ç™¼æŒ‡å—

### ç’°å¢ƒéœ€æ±‚
- JDK 21 æˆ–ä»¥ä¸Š
- Gradle 8.x
- IDE: IntelliJ IDEA æˆ– Eclipse
- è³‡æ–™åº«: H2 (é–‹ç™¼) / PostgreSQL 13+ (æ­£å¼)

## ä½¿ç”¨æŒ‡å—

### å®‰è£èˆ‡è¨­å®š

1. **ç’°å¢ƒæº–å‚™**
```bash
# ç¢ºèª JDK ç‰ˆæœ¬
java -version  # éœ€è¦ JDK 21 æˆ–ä»¥ä¸Š

# è¤‡è£½å°ˆæ¡ˆ
git clone <repository-url>
cd banking-benefit-process-engine

# å»ºæ§‹å°ˆæ¡ˆ
./gradlew build

# åŸ·è¡Œæ¸¬è©¦
./gradlew test
```

2. **è³‡æ–™åº«è¨­å®š**
```bash
# é–‹ç™¼ç’°å¢ƒ (H2)
spring.datasource.url=jdbc:h2:mem:benefitdb
spring.datasource.username=sa
spring.datasource.password=

# æ­£å¼ç’°å¢ƒ (PostgreSQL)
spring.datasource.url=jdbc:postgresql://localhost:5432/benefitdb
spring.datasource.username=your_username
spring.datasource.password=your_password
```

3. **å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼**
```bash
# é–‹ç™¼æ¨¡å¼å•Ÿå‹•
./gradlew bootRun

# ç”Ÿç”¢æ¨¡å¼å•Ÿå‹•
java -jar build/libs/banking-benefit-process-engine-1.0.0.jar
```

4. **æª¢æŸ¥æœå‹™ç‹€æ…‹**
```bash
# æŸ¥çœ‹ API æ–‡ä»¶
open http://localhost:8080/swagger-ui.html

# æŸ¥çœ‹ H2 è³‡æ–™åº«æ§åˆ¶å° (åƒ…é–‹ç™¼ç’°å¢ƒ)
open http://localhost:8080/h2-console
```

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **å»ºç«‹æµç¨‹**
```http
POST /api/v1/flows
Content-Type: application/json

{
  "flowName": "å®¢æˆ¶æ¬Šç›Šæª¢æ ¸",
  "description": "æª¢æŸ¥å®¢æˆ¶æ˜¯å¦ç¬¦åˆæ¬Šç›Šè³‡æ ¼",
  "version": "1.0"
}
```

2. **æ–°å¢æ±ºç­–ç¯€é»**
```http
POST /api/v1/flows/{flowId}/nodes
Content-Type: application/json

{
  "nodeType": "DECISION",
  "nodeName": "å¹´é½¡æª¢æ ¸",
  "decisionType": "SPEL",
  "spelExpression": "#customerData.age >= 20"
}
```

3. **æ–°å¢è™•ç†ç¯€é»**
```http
POST /api/v1/flows/{flowId}/nodes
Content-Type: application/json

{
  "nodeType": "PROCESS",
  "nodeName": "ç™¼é€æ¬Šç›Šé€šçŸ¥",
  "implementationClass": "com.example.NotificationProcessor"
}
```

4. **åŸ·è¡Œæµç¨‹**
```http
POST /api/v1/flows/{flowId}/execute
Content-Type: application/json

{
  "customerId": "CUST_001",
  "customerData": {
    "age": 25,
    "accountBalance": 100000,
    "membershipLevel": "GOLD"
  }
}
```

### å¯¦ä½œæŒ‡å—

#### 1. æ–°å¢æ±ºç­–ç¯€é» (Decision Node)

æ±ºç­–ç¯€é»ç”¨æ–¼åŸ·è¡Œæ¢ä»¶åˆ¤æ–·ï¼Œæ”¯æ´å…©ç¨®å¯¦ä½œæ–¹å¼ï¼š

1. **ä½¿ç”¨ SpEL è¡¨é”å¼**
```java
// å»ºç«‹åŸºæ–¼ SpEL çš„æ±ºç­–ç¯€é»
DecisionNode ageCheck = DecisionNode.create()
    .flowId("FLOW_001")
    .nodeId("D001")
    .name("å¹´é½¡æª¢æ ¸")
    .description("æª¢æŸ¥å®¢æˆ¶å¹´é½¡æ˜¯å¦ç¬¦åˆè³‡æ ¼")
    .spelExpression("#customerData.get('age') >= 20")
    .nodeOrder(1)
    .build();

// SpEL è¡¨é”å¼ç¯„ä¾‹
String[] spelExamples = {
    "#customerData.get('age') >= 20",                          // åŸºæœ¬æ¯”è¼ƒ
    "#customerData.get('vip') == true",                        // å¸ƒæ—åˆ¤æ–·
    "#customerData.get('balance') >= 50000",                   // æ•¸å€¼æ¯”è¼ƒ
    "T(java.time.LocalDate).now().getYear() - #customerData.get('birthYear') >= 20"  // æ—¥æœŸè¨ˆç®—
};
```

2. **ä½¿ç”¨ Java é¡åˆ¥**
```java
// å»ºç«‹åŸºæ–¼ Java é¡åˆ¥çš„æ±ºç­–ç¯€é»
DecisionNode creditCheck = DecisionNode.create()
    .flowId("FLOW_001")
    .nodeId("D002")
    .name("ä¿¡ç”¨è©•åˆ†æª¢æ ¸")
    .description("æª¢æŸ¥å®¢æˆ¶ä¿¡ç”¨è©•åˆ†")
    .implementationClass("com.example.banking.benefit.domain.decision.CreditScoreDecision")
    .nodeOrder(2)
    .build();

// å¯¦ä½œ DecisionCommand ä»‹é¢
@Component
public class CreditScoreDecision implements DecisionCommand {
    @Override
    public boolean evaluate(ExecutionContext context) {
        CustomerData customerData = context.getCustomerData();
        Integer creditScore = customerData.get("creditScore", Integer.class);
        return creditScore >= 700;
    }
}
```

#### 2. æ–°å¢è™•ç†ç¯€é» (Process Node)

è™•ç†ç¯€é»ç”¨æ–¼åŸ·è¡Œæ¥­å‹™é‚è¼¯ï¼ŒåŒæ¨£æ”¯æ´å…©ç¨®å¯¦ä½œæ–¹å¼ï¼š

1. **ä½¿ç”¨ SpEL è¡¨é”å¼**
```java
// å»ºç«‹åŸºæ–¼ SpEL çš„è™•ç†ç¯€é»
ProcessNode updatePoints = ProcessNode.create()
    .flowId("FLOW_001")
    .nodeId("P001")
    .name("æ›´æ–°ç©åˆ†")
    .description("å¢åŠ å®¢æˆ¶ç©åˆ†")
    .spelExpression("#customerData.attributes['points'] += 100")
    .nodeOrder(1)
    .stateName("PROCESSING")
    .build();

// SpEL è™•ç†ç¯„ä¾‹
String[] processingExamples = {
    "#customerData.attributes['points'] += 100",              // æ›´æ–°æ•¸å€¼
    "#customerData.attributes['level'] = 'GOLD'",            // è¨­å®šç‹€æ…‹
    "#customerData.attributes['lastUpdate'] = T(java.time.LocalDateTime).now()"  // æ›´æ–°æ™‚é–“
};
```

2. **ä½¿ç”¨ Java é¡åˆ¥**
```java
// å»ºç«‹åŸºæ–¼ Java é¡åˆ¥çš„è™•ç†ç¯€é»
ProcessNode sendNotification = ProcessNode.create()
    .flowId("FLOW_001")
    .nodeId("P002")
    .name("ç™¼é€é€šçŸ¥")
    .description("ç™¼é€æ¬Šç›Šå•Ÿç”¨é€šçŸ¥")
    .implementationClass("com.example.banking.benefit.domain.process.NotificationProcessor")
    .nodeOrder(2)
    .stateName("NOTIFYING")
    .build();

// å¯¦ä½œè™•ç†é‚è¼¯
@Component
public class NotificationProcessor implements ProcessCommand {
    @Autowired
    private NotificationService notificationService;
    
    @Override
    public ExecutionResult execute(ExecutionContext context) {
        String customerId = context.getCustomerId();
        String message = String.format("å°Šæ•¬çš„å®¢æˆ¶ %sï¼Œæ‚¨çš„æ¬Šç›Šå·²å•Ÿç”¨", customerId);
        notificationService.sendNotification(customerId, message);
        return ExecutionResult.success();
    }
}
```

#### 3. è¨­å®šç¯€é»é—œä¿‚

ç¯€é»ä¹‹é–“çš„é—œä¿‚å®šç¾©äº†æµç¨‹çš„åŸ·è¡Œé †åºï¼š

```java
// å»ºç«‹æµç¨‹
Flow flow = Flow.create(FlowId.generate(), "ä¿¡ç”¨å¡æ¬Šç›Šå•Ÿç”¨æµç¨‹", "è‡ªå‹•æª¢æ ¸ä¸¦å•Ÿç”¨ä¿¡ç”¨å¡æ¬Šç›Š", Version.of("1.0"));

// æ·»åŠ ç¯€é»
flow.addDecisionNode(ageCheck);
flow.addDecisionNode(creditCheck);
flow.addProcessNode(updatePoints);
flow.addProcessNode(sendNotification);

// è¨­å®šç¯€é»é—œä¿‚
flow.addRelation(NodeRelation.create()
    .from(ageCheck)
    .to(creditCheck)
    .condition(true));

flow.addRelation(NodeRelation.create()
    .from(creditCheck)
    .to(updatePoints)
    .condition(true));

flow.addRelation(NodeRelation.create()
    .from(updatePoints)
    .to(sendNotification)
    .condition(true));

// è¨­å®šèµ·å§‹ç¯€é»
flow.setStartNode(ageCheck.getNodeId());

// å•Ÿç”¨æµç¨‹
flow.activate();
```

#### 4. åŸ·è¡Œæµç¨‹

```java
// æº–å‚™åŸ·è¡Œç’°å¢ƒ
Map<String, CustomerAttribute<?>> attributes = new HashMap<>();
attributes.put("age", CustomerAttribute.of(25, Integer.class));
attributes.put("creditScore", CustomerAttribute.of(750, Integer.class));
attributes.put("points", CustomerAttribute.of(0, Integer.class));
CustomerData customerData = CustomerData.create("CUST_001", attributes);

// å»ºç«‹åŸ·è¡Œä¸Šä¸‹æ–‡
ExecutionContext context = new DefaultExecutionContext();
context.setFlowId(flow.getFlowId());
context.setCustomerId("CUST_001");
context.setCustomerData(customerData);

// åŸ·è¡Œæµç¨‹
ExecutionResult result = flowExecutionService.execute(flow, context);

// æª¢æŸ¥åŸ·è¡Œçµæœ
if (result.getStatus().isSuccess()) {
    System.out.println("æµç¨‹åŸ·è¡ŒæˆåŠŸ");
    System.out.println("å®¢æˆ¶ç©åˆ†: " + customerData.get("points", Integer.class));
} else {
    System.out.println("æµç¨‹åŸ·è¡Œå¤±æ•—: " + result.getErrorMessage());
}
```

### å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒ

1. **æ¬Šç›Šè³‡æ ¼æª¢æ ¸æµç¨‹**
```java
// 1. å»ºç«‹æ±ºç­–ç¯€é»
DecisionNode ageCheck = DecisionNode.create()
    .name("å¹´é½¡æª¢æ ¸")
    .spelExpression("#customerData.get('age') >= 20");

DecisionNode balanceCheck = DecisionNode.create()
    .name("å¸³æˆ¶é¤˜é¡æª¢æ ¸")
    .spelExpression("#customerData.get('balance') >= 50000");

// 2. å»ºç«‹è™•ç†ç¯€é»
ProcessNode notifyCustomer = ProcessNode.create()
    .name("ç™¼é€é€šçŸ¥")
    .implementationClass("com.example.NotificationProcessor");

// 3. è¨­å®šç¯€é»é—œä¿‚
flow.addDecisionNode(ageCheck);
flow.addDecisionNode(balanceCheck);
flow.addProcessNode(notifyCustomer);
flow.addRelation(NodeRelation.create()
    .from(ageCheck)
    .to(balanceCheck)
    .condition(true));
```

2. **å‹•æ…‹æ±ºç­–é‚è¼¯**
```java
// ä½¿ç”¨ SpEL è¡¨é”å¼
spelExpression = "#customerData.membershipLevel == 'GOLD' " +
                "and #customerData.transactionCount > 10";

// ä½¿ç”¨ Java é¡åˆ¥
@Component
public class CustomDecisionLogic implements DecisionCommand {
    @Override
    public boolean evaluate(ExecutionContext context) {
        CustomerData customer = context.getCustomerData();
        return customer.getMembershipLevel() == MembershipLevel.GOLD &&
               customer.getTransactionCount() > 10;
    }
}
```

3. **Drools è¦å‰‡é–‹ç™¼**

ç³»çµ±ç¾å·²æ•´åˆ Drools è¦å‰‡å¼•æ“ï¼Œæ”¯æ´è²æ˜å¼æ¥­å‹™è¦å‰‡ç®¡ç†ï¼š

**è¦å‰‡æ–‡ä»¶çµæ§‹**
```
src/main/resources/rules/
â”œâ”€â”€ customer/                        # å®¢æˆ¶ç›¸é—œè¦å‰‡
â”‚   â””â”€â”€ customer-eligibility.drl     # å®¢æˆ¶è³‡æ ¼è¦å‰‡
â””â”€â”€ flow/                            # æµç¨‹æ§åˆ¶è¦å‰‡
    â””â”€â”€ flow-control.drl             # æµç¨‹æ§åˆ¶è¦å‰‡
```

**DRL è¦å‰‡ç¯„ä¾‹**
```drl
package com.example.banking.benefit.rules.customer

import com.example.banking.benefit.domain.model.common.CustomerData
import com.example.banking.benefit.domain.model.common.BankingContext

rule "å®¢æˆ¶å¹´é½¡é©—è­‰"
when
    $customer: CustomerData(get("age", Integer.class) >= 20, get("age", Integer.class) <= 65)
    $context: BankingContext()
then
    System.out.println("å®¢æˆ¶å¹´é½¡é©—è­‰é€šé: " + $customer.get("age", Integer.class));
    $context.setDecisionResult(true);
end
```

**DroolsDecisionEvaluationService ä½¿ç”¨**
```java
@Service
@Primary
public class DroolsDecisionEvaluationService implements DecisionEvaluationService {
    
    @Override
    public boolean evaluate(DecisionNode decisionNode, BaseExecutionContext context) {
        // é€é Drools è¦å‰‡å¼•æ“è©•ä¼°æ±ºç­–
        return droolsRuleEngine.executeDecisionRules(decisionNode.getNodeId(), context);
    }
}
```

4. **ç›£æ§æµç¨‹åŸ·è¡Œ**
```http
# æŸ¥è©¢åŸ·è¡Œçµ±è¨ˆ
GET /api/v1/statistics

# æŸ¥è©¢ç‰¹å®šæµç¨‹åŸ·è¡Œè¨˜éŒ„
GET /api/v1/executions?flowId={flowId}

# æŸ¥çœ‹è©³ç´°åŸ·è¡Œæ—¥èªŒ
GET /api/v1/executions/{executionId}/logs
```

### é–‹ç™¼è¦ç¯„

#### ç¨‹å¼ç¢¼é¢¨æ ¼
- éµå¾ª Google Java Style Guide
- ä½¿ç”¨ Lombok æ¸›å°‘ boilerplate code
- å®Œæ•´çš„ JavaDoc æ–‡ä»¶
- å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡ > 80%

#### åˆ†æ”¯ç­–ç•¥
- `main`: æ­£å¼ç’°å¢ƒä»£ç¢¼
- `develop`: é–‹ç™¼ç’°å¢ƒä»£ç¢¼
- `feature/*`: åŠŸèƒ½é–‹ç™¼åˆ†æ”¯
- `hotfix/*`: ç·Šæ€¥ä¿®å¾©åˆ†æ”¯

#### æäº¤è¨Šæ¯æ ¼å¼
```
<type>(<scope>): <subject>

<body>

<footer>
```

ç¯„ä¾‹:
```
feat(flow): add decision node evaluation

- Implement SpEL expression evaluator
- Add Java class executor
- Support dynamic decision logic

Closes #123
```

## æ¸¬è©¦ç‹€æ…‹

### æ¸¬è©¦è¦†è“‹ç‡
- **ç¸½æ¸¬è©¦æ•¸**: 70 å€‹
- **é€šéç‡**: 100%
- **æ¸¬è©¦é¡åˆ¥**:
  - âœ… SpelExpressionEvaluatorTest (7/7)
  - âœ… JavaClassEvaluatorTest (5/5)
  - âœ… BaseDecisionEvaluationServiceTest (6/6)
  - âœ… BaseLogicCompositionServiceTest (8/8)
  - âœ… BaseProcessExecutionServiceTest (5/5)
  - âœ… DecisionNodeExecutorTest (6/6)
  - âœ… ProcessNodeExecutorTest (7/7)
  - âœ… SimpleFlowExecutionServiceImplTest (2/2)
  - âœ… FlowExecutionControllerTest (17/17)
  - âœ… DroolsDecisionEvaluationServiceUnitTest (7/7)

### æœ€è¿‘ä¿®å¾©
- ğŸ†• **Drools è¦å‰‡å¼•æ“æ•´åˆ**ï¼šå®Œæ•´çš„ Drools æ±ºç­–è©•ä¼°æœå‹™æ¸¬è©¦
- âœ… **è¦å‰‡åŸ·è¡Œé©—è­‰**ï¼š7 å€‹ Drools æ¸¬è©¦æ¡ˆä¾‹ï¼ŒåŒ…å«è¦å‰‡è§¸ç™¼é©—è­‰
- ğŸ”§ **ç¨ç«‹å–®å…ƒæ¸¬è©¦**ï¼šé¿å… Spring Boot ä¸Šä¸‹æ–‡è¤‡é›œæ€§çš„æ¸¬è©¦è¨­è¨ˆ
- ğŸ“Š **è¦å‰‡ç›£æ§æ¸¬è©¦**ï¼šé©—è­‰ KieContainer å‰µå»ºå’Œè¦å‰‡ç·¨è­¯éç¨‹
- ğŸ¯ **æ¥­å‹™è¦å‰‡æ¸¬è©¦**ï¼šå®¢æˆ¶è³‡æ ¼å’Œæµç¨‹æ§åˆ¶è¦å‰‡çš„å®Œæ•´æ¸¬è©¦è¦†è“‹

## æ¸¬è©¦ç­–ç•¥

### æ¸¬è©¦é‡‘å­—å¡”
1. **å–®å…ƒæ¸¬è©¦** (70%): æ¸¬è©¦å€‹åˆ¥é¡åˆ¥èˆ‡æ–¹æ³•
2. **æ•´åˆæ¸¬è©¦** (20%): æ¸¬è©¦æ¨¡çµ„é–“äº’å‹•
3. **ç«¯åˆ°ç«¯æ¸¬è©¦** (10%): æ¸¬è©¦å®Œæ•´æµç¨‹

#### æ¸¬è©¦é¡å‹
- **é ˜åŸŸæ¸¬è©¦**: é©—è­‰æ¥­å‹™é‚è¼¯æ­£ç¢ºæ€§
- **æ¶æ§‹æ¸¬è©¦**: é©—è­‰åˆ†å±¤èˆ‡ä¾è³´é—œä¿‚
- **æ•ˆèƒ½æ¸¬è©¦**: é©—è­‰æ•ˆèƒ½æŒ‡æ¨™é”æˆ
- **å¥‘ç´„æ¸¬è©¦**: é©—è­‰ API å¥‘ç´„ä¸€è‡´æ€§

## éƒ¨ç½²èˆ‡é‹ç¶­

### éƒ¨ç½²ç’°å¢ƒ

#### é–‹ç™¼ç’°å¢ƒ
- å…§åµŒ H2 è³‡æ–™åº«
- è¨˜æ†¶é«”å¿«å–
- Debug æ—¥èªŒç­‰ç´š

#### æ¸¬è©¦ç’°å¢ƒ
- PostgreSQL è³‡æ–™åº«
- Redis å¿«å–
- å®Œæ•´ç›£æ§

#### æ­£å¼ç’°å¢ƒ
- é«˜å¯ç”¨ PostgreSQL
- Redis Cluster
- å®Œæ•´æ—¥èªŒèˆ‡ç›£æ§

### ç›£æ§æŒ‡æ¨™

#### æ¥­å‹™æŒ‡æ¨™
- æµç¨‹åŸ·è¡ŒæˆåŠŸç‡
- å¹³å‡åŸ·è¡Œæ™‚é–“
- æ±ºç­–ç¯€é»è©•ä¼°æ™‚é–“
- å®¢æˆ¶æ»¿æ„åº¦

#### æŠ€è¡“æŒ‡æ¨™
- CPU ä½¿ç”¨ç‡
- è¨˜æ†¶é«”ä½¿ç”¨ç‡
- è³‡æ–™åº«é€£æ¥æ•¸
- å¿«å–å‘½ä¸­ç‡
- API å›æ‡‰æ™‚é–“

### æ—¥èªŒç®¡ç†

#### æ—¥èªŒç­‰ç´š
- **ERROR**: ç³»çµ±éŒ¯èª¤èˆ‡ä¾‹å¤–
- **WARN**: è­¦å‘Šè¨Šæ¯
- **INFO**: ä¸€èˆ¬æ“ä½œè¨˜éŒ„
- **DEBUG**: è©³ç´°é™¤éŒ¯è³‡è¨Š

#### æ—¥èªŒæ ¼å¼
```json
{
  "timestamp": "2025-10-04T10:00:00.000Z",
  "level": "INFO",
  "logger": "com.example.banking.benefit.domain.service",
  "message": "Flow execution completed",
  "mdc": {
    "flowId": "FLOW_001",
    "executionId": "EXEC_123456",
    "customerId": "CUST_001"
  }
}
```

## å®‰å…¨æ€§è€ƒé‡

### èªè­‰èˆ‡æˆæ¬Š
- JWT Token èªè­‰
- RBAC è§’è‰²æ¬Šé™æ§åˆ¶
- API é‡‘é‘°ç®¡ç†

### è³‡æ–™ä¿è­·
- æ•æ„Ÿè³‡æ–™åŠ å¯†å„²å­˜
- è³‡æ–™å‚³è¼¸ HTTPS åŠ å¯†
- å€‹äººè³‡æ–™å»è­˜åˆ¥åŒ–

### å¯©è¨ˆè¿½è¹¤
- å®Œæ•´æ“ä½œæ—¥èªŒ
- è³‡æ–™è®Šæ›´è¿½è¹¤
- åˆè¦æ€§å ±å‘Š

## æ•ˆèƒ½å„ªåŒ–

### å¿«å–ç­–ç•¥
- Redis åˆ†æ•£å¼å¿«å–
- æœ¬åœ°è¨˜æ†¶é«”å¿«å–
- æŸ¥è©¢çµæœå¿«å–

### è³‡æ–™åº«å„ªåŒ–
- ç´¢å¼•æœ€ä½³åŒ–
- æŸ¥è©¢æ•ˆèƒ½èª¿å„ª
- é€£æ¥æ± è¨­å®š

### ä½µç™¼è™•ç†
- ç•°æ­¥åŸ·è¡Œæ©Ÿåˆ¶
- åŸ·è¡Œç·’æ± ç®¡ç†
- èƒŒå£“æ§åˆ¶

## æœªä¾†ç™¼å±•è¦åŠƒ

### åŠŸèƒ½æ“´å±•
- [ ] è¦–è¦ºåŒ–æµç¨‹è¨­è¨ˆå™¨
- [ ] è¦å‰‡å¼•æ“æ•´åˆ
- [ ] æ©Ÿå™¨å­¸ç¿’æ±ºç­–æ”¯æ´
- [ ] å¤šç§Ÿæˆ¶æ”¯æ´

### æŠ€è¡“å‡ç´š
- [ ] å®¹å™¨åŒ–éƒ¨ç½² (Docker + Kubernetes)
- [ ] å¾®æœå‹™æ¶æ§‹æ‹†åˆ†
- [ ] äº‹ä»¶é©…å‹•æ¶æ§‹
- [ ] GraphQL API æ”¯æ´

### ç‡Ÿé‹å„ªåŒ–
- [ ] è‡ªå‹•åŒ– CI/CD
- [ ] æ··æ²Œå·¥ç¨‹æ¸¬è©¦
- [ ] æ•ˆèƒ½åŸºæº–æ¸¬è©¦
- [ ] å®‰å…¨æ€§æ»²é€æ¸¬è©¦

## åƒè€ƒè³‡æ–™

### æ¶æ§‹è¨­è¨ˆ
- [Hexagonal Architecture](https://alistair.cockburn.us/hexagonal-architecture/)
- [Domain-Driven Design](https://domainlanguage.com/ddd/)
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

### Spring Framework
- [Spring Boot Documentation](https://spring.io/projects/spring-boot)
- [Spring Expression Language](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#expressions)
- [Spring Data JPA](https://spring.io/projects/spring-data-jpa)

### æ¸¬è©¦æŒ‡å—
- [JUnit 5 User Guide](https://junit.org/junit5/docs/current/user-guide/)
- [Mockito Documentation](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html)
- [Test-Driven Development](https://www.amazon.com/Test-Driven-Development-Kent-Beck/dp/0321146530)

---

## æˆæ¬Šè²æ˜

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ï¼Œè©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

## è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼Œè«‹åƒè€ƒ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è©³ç´°çš„è²¢ç»æµç¨‹ã€‚

---

**æœ€å¾Œæ›´æ–°**: 2025å¹´10æœˆ10æ—¥  
**ç‰ˆæœ¬**: 1.0.0  
**æ¸¬è©¦ç‹€æ…‹**: âœ… 70/70 é€šé (100%)  
**Drools æ•´åˆ**: âœ… å®Œæˆ  
**ç¶­è­·è€…**: Banking Benefit Team